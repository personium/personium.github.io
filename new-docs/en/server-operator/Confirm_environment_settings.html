<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Environment information on units constructed by Ansible · </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="-------------------------------------------------"/><meta name="docsearch:version" content="1.7.21"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Environment information on units constructed by Ansible · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://personium.github.io/"/><meta property="og:description" content="-------------------------------------------------"/><meta property="og:image" content="https://personium.github.io/images/header-icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://personium.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://personium.github.io/blog/atom.xml" title=" Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://personium.github.io/blog/feed.xml" title=" Blog RSS Feed"/><link rel="stylesheet" href="/docusaurus_css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/logo-quantify-light.png" alt=""/><h2 class="headerTitleWithLogo"></h2></a><a href="/en/versions"><h3>1.7.21</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/new-docs/en/README" target="_self">Documentation</a></li><li class=""><a href="/new-docs/en/apiref/000_Rest_API_Reference" target="_self">API Reference</a></li><li class=""><a href="/blog/" target="_self">News</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/new-docs/ja/server-operator/Confirm_environment_settings">日本語</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>For Server Operator</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/new-docs/en/README">Documentation for Personium</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/overview/001_Introduction">What is Personium?</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/user_guide/001_Personium_Architecture">Personium Architecture</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/user_guide/003_Auth">Authentication model</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/user_guide/007_WebDAV_model">WebDAV Model</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/user_guide/008_Glossary">Glossary</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/user_guide/990_Old_Version_API_Ref">Old Version API References</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">For Personium Operators<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">For Server Operator</h4><ul><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/README">Server Software Operator&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/setup">Getting Started with Personium using Ansible</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/new-docs/en/server-operator/Confirm_environment_settings">Environment information on units constructed by Ansible</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/setup_virtual_image">Getting Started with Personium using Virtual image</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/proxy_exclusion_setting">Proxy exclusion setting</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/setup_authentication_plugins">Setup Authentication Plugins</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/setup_engine_extensions">Setup Engine Extensions</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/unit_operation_design">Operation design and setting of Unit</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/unit_config_list">Unit configurations</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/unit_coordination">How to set coordination between units</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/server-operator/unit_security">Security of Unit (setting that recommends change from default)</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">For Unit Administrator</h4><ul><li class="navListItem"><a class="navItem" href="/new-docs/en/unit-administrator/README">Unit Administrator&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/unit-administrator/Unit-User">Unit User</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/unit-administrator/tutorial">Personium Unit management tutorial</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/unit-administrator/Data_Management">Data management</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">For App Developer<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/README">Application Developer&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/using_odata">How to use OData Service Collection (OSC)</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/Personium_Apps">Personium App</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/user_guide/004_Client_auth">Client registration &amp; authentication</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/app_authn">App authentication</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/Roles">Role in Personium</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/launch_from_homeapp">Launch application from Home application</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/Personium-Engine">Personium Engine</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/app-developer/671_Engine_Script_Samples">Engine Script Samples</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/cell-gui-developer/README">Cell GUI developer&#x27;s Guide</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Contributor Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">For Document Contribution</h4><ul><li class="navListItem"><a class="navItem" href="/new-docs/en/document-writer/README">Personium How to participate in document maintenance / improvement</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">For Code Contribution</h4><ul><li class="navListItem"><a class="navItem" href="/new-docs/en/software-developer/README">Server Developer&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/software-developer/build_development_environment">Build development environment</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/software-developer/personium_tests">Personium Tests</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/plugin-developer/README">Server Plugin Developer&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/plugin-developer/Personium_AuthenticationPluginDeveloperManual">Personium Authentication Plugin Developer Manual</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/plugin-developer/EngineExtension_Imple_and_Deploy">Engine Extension implementation and deployment specification</a></li><li class="navListItem"><a class="navItem" href="/new-docs/en/plugin-developer/Extension_Send_Mail">Extension: Email sending function</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Environment information on units constructed by Ansible</h1></header><article><div><span><hr>
<h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>Describe the basic settings and considerations for the environment constructed with Ansible.
By performing this procedure, you can understand the installation location and basic settings of the main middleware that makes up Personium.</p>
<h2><a class="anchor" aria-hidden="true" id="web-service"></a><a href="#web-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web service</h2>
<ul>
<li>Check the basic settings of the server on which the Web service runs.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="nginx"></a><a href="#nginx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nginx</h3>
<ul>
<li>Personium uses Nginx to realize the Web.
Nginx is installed as follows.</li>
</ul>
<table>
<thead>
<tr><th>item</th><th>path</th></tr>
</thead>
<tbody>
<tr><td>Install Directory</td><td>/opt/nginx-1.14.0/</td></tr>
<tr><td>Config Files</td><td>/opt/nginx-1.14.0/conf/</td></tr>
<tr><td>Log Directory</td><td>/personium/nginx/log/accesslog_443/</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="server-certificate"></a><a href="#server-certificate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Server Certificate</h3>
<ul>
<li>Personium is a service provided by HTTPS. Confirm the setting of the server certificate used to realize HTTPS.</li>
</ul>
<ol>
<li><p>First, check the path of the server certificate used by Nginx.
To check the path of the currently used server certificate Execute the following command and confirm the item &quot;ssl_certificate&quot; &quot;ssl_certificate_key&quot;.</p>
<pre><code class="hljs css language-console"><span class="hljs-meta">#</span><span class="bash"> cat /opt/nginx/conf/nginx.conf</span>
</code></pre>
<p>Immediately after construction, it is as follows.</p>
<pre><code class="hljs">ssl_sertificate         <span class="hljs-regexp">/opt/</span>nginx<span class="hljs-regexp">/conf/</span>server.crt
ssl_certificate_key     <span class="hljs-regexp">/opt/</span>nginx<span class="hljs-regexp">/conf/</span>server.key
</code></pre></li>
<li><p>Check the contents of the server certificate you are using.
Execute the following command to check the common name of the server certificate.</p>
<pre><code class="hljs css language-console"><span class="hljs-meta">#</span><span class="bash"> openssl x509 -noout -subject -<span class="hljs-keyword">in</span> /opt/nginx/conf/server.crt</span>
</code></pre>
<p>When creating as in the example of creating a server certificate described in <a href="https://github.com/personium/ansible/tree/master/1-server_unit">1-server_unit/README</a> or <a href="https://github.com/personium/ansible/tree/master/3-server_unit">3-server_unit/README</a>, It is displayed as follows. CN must represent common name and must match FQDN when accessing with HTTPS protocol.</p>
<pre><code class="hljs">subject= /<span class="hljs-attribute">C</span>=XXX/L=Default City/<span class="hljs-attribute">O</span>=Default Company Ltd/<span class="hljs-attribute">CN</span>=personium.example.com
</code></pre></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="ap-service"></a><a href="#ap-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AP service</h2>
<p>Check the basic settings of the server on which the AP service runs.</p>
<h3><a class="anchor" aria-hidden="true" id="tomcat-environment"></a><a href="#tomcat-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tomcat environment</h3>
<ul>
<li>Personium uses Tomcat to realize the AP.
Tomcat is installed as follows.</li>
</ul>
<table>
<thead>
<tr><th>Item</th><th>Path</th></tr>
</thead>
<tbody>
<tr><td>Install Directory</td><td>/opt/apache-tomcat-9.0.10/</td></tr>
<tr><td>Config Files</td><td>/opt/apache-tomcat-9.0.10/conf/</td></tr>
<tr><td>Log Directory</td><td>/personium/tomcat/logs/</td></tr>
<tr><td>Application Directory</td><td>/opt/apache-tomcat-9.0.10/webapps/</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="unit-certificate"></a><a href="#unit-certificate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unit Certificate</h3>
<ul>
<li>Personium is an important file using unit certificates with various functions such as access token verification.</li>
</ul>
<ol>
<li><p>First, check the path of the unit certificate currently in use. The unit certificate is specified in the file personium-unit-config.properties.</p>
<ul>
<li>Execute the following command to check the file.</li>
</ul>
<pre><code class="hljs css language-console"><span class="hljs-meta">#</span><span class="bash"> cat /personium/personium-core/conf/18888/personium-unit-config.properties | grep ^io.personium.core.x509</span>
</code></pre>
<p>The environment automatically constructed with Ansible has the following settings.</p>
<pre><code class="hljs">io<span class="hljs-selector-class">.personium</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.x509</span>.root=/opt/x509/unit-self-sign<span class="hljs-selector-class">.crt</span>
io<span class="hljs-selector-class">.personium</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.x509</span>.crt=/opt/x509/unit-self-sign<span class="hljs-selector-class">.crt</span>
io<span class="hljs-selector-class">.personium</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.x509</span>.key=/opt/x509/unit<span class="hljs-selector-class">.key</span>
</code></pre></li>
<li><p>Check the common name of the unit certificate. At this time, the common name of the unit certificate must match the FQDN of its own Personium Unit.</p>
<ul>
<li>You can check the unit certificate information by executing the following command.</li>
</ul>
<pre><code class="hljs css language-console"><span class="hljs-meta">#</span><span class="bash"> openssl x509 -noout -subject -<span class="hljs-keyword">in</span> /opt/x509/unit-self-sign.crt</span>
</code></pre>
<ul>
<li>When created as shown in the example of creation of unit certificate described in <a href="How_to_generate_Self-Signed_Unit_Certificate.md">How to generate Self-signed Unit Certificate</a>, it is displayed as follows. The CN should represent the common name and it must match the FQDN for HTTPS access.</li>
</ul>
<pre><code class="hljs">subject= /<span class="hljs-attribute">C</span>=XXX/L=Default City/<span class="hljs-attribute">O</span>=Default Company Ltd/<span class="hljs-attribute">CN</span>=personium.example.com
</code></pre></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="personium-environment"></a><a href="#personium-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Personium environment</h3>
<ul>
<li>Personium is installed as follows.</li>
</ul>
<table>
<thead>
<tr><th>Item</th><th>Path</th></tr>
</thead>
<tbody>
<tr><td>personium-core</td><td>/opt/tomcat/webapps/</td></tr>
<tr><td>personium-engine</td><td>/opt/tomcat/webapps/</td></tr>
<tr><td>personium-core Log Directory</td><td>/personium/personium-core/log/personium-core.log</td></tr>
<tr><td>personium-engine Log Directory</td><td>/personium/personium-engine/log/personium-engine.log</td></tr>
<tr><td>Unit Config File</td><td>/personium/personium-core/conf/18888/personium-unit-config.properties</td></tr>
</tbody>
</table>
<ul>
<li><p>By changing personium-unit-config.properties, you can change <a href="https://personium.io/docs/en/server-operator/unit_config_list.html">Unit configurations</a> from the default.<br>
Immediately after construction with Ansible, it is set as follows.<br>
* {} Means that the contents defined in hosts changed before Ansible execution are described.<br>
* {{}} Indicates that a randomly determined character string is described when Ansible is executed.</p>
<pre><code class="hljs">io.personium.core.masterToken={<span class="hljs-attribute">master_token}
io.personium.core.unitScheme=https
io.personium.core.unitUser.issuers=personium-localunit</span>:/UnitUserCell/ personium-localunit:/unitadmin/
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.lock</span><span class="hljs-variable">.accountlock</span><span class="hljs-variable">.time</span>=1
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.plugin</span><span class="hljs-variable">.path</span>=/personium/personium-core/plugins
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.x</span>509<span class="hljs-variable">.root</span>=/opt/x509/unit-self-sign<span class="hljs-variable">.crt</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.x</span>509<span class="hljs-variable">.crt</span>=/opt/x509/unit-self-sign<span class="hljs-variable">.crt</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.x</span>509<span class="hljs-variable">.key</span>=/opt/x509/unit<span class="hljs-variable">.key</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.security</span><span class="hljs-variable">.secret</span>16={{token<span class="hljs-variable">.key</span>}}
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.security</span><span class="hljs-variable">.auth</span><span class="hljs-variable">.password</span><span class="hljs-variable">.salt</span>={{sakt<span class="hljs-variable">.key</span>}}
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.account</span><span class="hljs-variable">.lastauthenticated</span><span class="hljs-variable">.enabled</span>=false
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.lock</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.host</span>=127.0.0.1
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.lock</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.port</span>=11211
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.lock</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.opTimeout</span>=12000
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.type</span>=memcached
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.host</span>=127.0.0.1
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.port</span>=11212
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.cell</span><span class="hljs-variable">.enabled</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.box</span><span class="hljs-variable">.enabled</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.schema</span><span class="hljs-variable">.enabled</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.opTimeout</span>=12000
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.cache</span><span class="hljs-variable">.memcached</span><span class="hljs-variable">.expiresin</span>=86400
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.es</span><span class="hljs-variable">.hosts</span>=127.0.0.1:9300
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.es</span><span class="hljs-variable">.cluster</span><span class="hljs-variable">.name</span>=personium
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.es</span><span class="hljs-variable">.ads</span><span class="hljs-variable">.type</span>=none
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.enabled</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.host</span>=localhost
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.port</span>=18888
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.path</span>=personium-engine
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.binaryData</span><span class="hljs-variable">.physical</span><span class="hljs-variable">.delete</span><span class="hljs-variable">.mode</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.binaryData</span><span class="hljs-variable">.fsync</span><span class="hljs-variable">.enabled</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.blobStore</span><span class="hljs-variable">.root</span>=/personium_nfs/personium-core/dav
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.event</span><span class="hljs-variable">.log</span><span class="hljs-variable">.current</span><span class="hljs-variable">.dir</span>=/personium_nfs/personium-core/eventlog
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.bar</span><span class="hljs-variable">.file</span><span class="hljs-variable">.maxSize</span>=100
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.bar</span><span class="hljs-variable">.entry</span><span class="hljs-variable">.maxSize</span>=10
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.bar</span><span class="hljs-variable">.installfile</span><span class="hljs-variable">.dir</span>=/personium_nfs/personium-core/barInstall
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.bar</span><span class="hljs-variable">.progress</span><span class="hljs-variable">.expireInSec</span>=259200
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.defaultBaseUrl</span>=https://personium<span class="hljs-variable">.example</span><span class="hljs-variable">.com</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.masterToken</span>={master_token}
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.elasticsearch</span><span class="hljs-variable">.hosts</span>=127.0.0.1:9300
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.elasticsearch</span><span class="hljs-variable">.cluster</span>=personium
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.binaryData</span><span class="hljs-variable">.fsync</span><span class="hljs-variable">.enabled</span>=true
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.blobStore</span><span class="hljs-variable">.root</span>=/personium_nfs/personium-core/dav
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.x</span>509<span class="hljs-variable">.root</span>=/opt/x509/unit-self-sign<span class="hljs-variable">.crt</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.x</span>509<span class="hljs-variable">.key</span>=/opt/x509/unit<span class="hljs-variable">.key</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.x</span>509<span class="hljs-variable">.crt</span>=/opt/x509/unit-self-sign<span class="hljs-variable">.crt</span>
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.engine</span><span class="hljs-variable">.security</span><span class="hljs-variable">.secret</span>16={{token<span class="hljs-variable">.key</span>}}
io<span class="hljs-variable">.personium</span><span class="hljs-variable">.core</span><span class="hljs-variable">.dav</span><span class="hljs-variable">.childresource</span><span class="hljs-variable">.maxnum</span>=1000000
</code></pre></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="db-service"></a><a href="#db-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DB service</h2>
<ul>
<li>Check the settings of the server on which the Elasticsearch service runs.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="elasticsearch-environment"></a><a href="#elasticsearch-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Elasticsearch environment</h3>
<ul>
<li><p>Personium uses Elasticsearch to realize DB.
Elasticsearch is installed as follows.<br>
For version,Please check the version of elasticsearch <a href="https://github.com/personium/ansible#middleware-on-vm">here</a>.</p>
<table>
<thead>
<tr><th>Item</th><th>Path</th></tr>
</thead>
<tbody>
<tr><td>Install Directory</td><td>/opt/elasticsearch-{ Elasticsearch version }/</td></tr>
<tr><td>Config Files</td><td>/opt/elasticsearch-{ Elasticsearch version }/config/</td></tr>
<tr><td>Log Direcroty</td><td>/personium/elasticsearch/log/</td></tr>
<tr><td>Data Direcroty</td><td>/personium/elasticsearch-{ Elasticsearch version }/data/</td></tr>
</tbody>
</table>
</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/new-docs/en/server-operator/setup"><span class="arrow-prev">← </span><span>Getting Started with Personium using Ansible</span></a><a class="docs-next button" href="/new-docs/en/server-operator/setup_virtual_image"><span>Getting Started with Personium using Virtual image</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#web-service">Web service</a><ul class="toc-headings"><li><a href="#nginx">Nginx</a></li><li><a href="#server-certificate">Server Certificate</a></li></ul></li><li><a href="#ap-service">AP service</a><ul class="toc-headings"><li><a href="#tomcat-environment">Tomcat environment</a></li><li><a href="#unit-certificate">Unit Certificate</a></li><li><a href="#personium-environment">Personium environment</a></li></ul></li><li><a href="#db-service">DB service</a><ul class="toc-headings"><li><a href="#elasticsearch-environment">Elasticsearch environment</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/images/favicon.ico" alt="" width="66" height="58"/></a><div><h5>Documentation</h5><a href="https://personium.io/docs/en/overview/001_Introduction.html">Introduction</a><a href="https://personium.io/docs/en/server-operator/">Server Software Operator&#x27;s Guide</a><a href="https://personium.io/docs/en/app-developer/">Application Developer&#x27;s Guide</a><a href="https://personium.io/docs/en/apiref/current/000_Rest_API_Reference.html">API Reference</a></div><div><h5>Community</h5><a href="https://personium-io.slack.com/">Slack</a><a href="https://github.com/personium">GitHub</a><a href="https://twitter.com/personium" target="_blank" rel="noreferrer noopener">Twitter</a><div class="social"><a href="https://twitter.com/personium" class="twitter-follow-button">Follow @personium</a></div></div><div><h5>More</h5><a href="/blog">News</a><a href="https://drive.google.com/drive/u/1/folders/1VWGpfCbPOLY2TCa7Lh2jbcsZ5Bp0WV4q">Draft Docs</a></div></section><a href="https://personium.io/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/logo-quantify-light.png" alt="Personium Project" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Personium Project</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>