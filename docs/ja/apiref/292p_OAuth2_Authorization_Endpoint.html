<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>POST acceptance at OAuth2.0 Authorization Endpoint · </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## 概要"/><meta name="docsearch:version" content="1.7.18"/><meta name="docsearch:language" content="ja"/><meta property="og:title" content="POST acceptance at OAuth2.0 Authorization Endpoint · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://personium.github.io/"/><meta property="og:description" content="## 概要"/><meta property="og:image" content="https://personium.github.io/images/header-icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://personium.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://personium.github.io/blog/atom.xml" title=" Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://personium.github.io/blog/feed.xml" title=" Blog RSS Feed"/><link rel="stylesheet" href="/docusaurus_css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ja"><img class="logo" src="/img/logo-quantify-light.png" alt=""/><h2 class="headerTitleWithLogo"></h2></a><a href="/ja/versions"><h3>1.7.18</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/README" target="_self">Documentation</a></li><li class=""><a href="/docs/en/apiref/000_Rest_API_Reference" target="_self">API Reference</a></li><li class=""><a href="/blog/" target="_self">News</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>日本語</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/apiref/292p_OAuth2_Authorization_Endpoint">English</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">POST acceptance at OAuth2.0 Authorization Endpoint</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="概要"></a><a href="#概要" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概要</h2>
<p>OAuth 2.0 認可エンドポイントでは、POSTメソッドを受け付けます。
これは、OAuth 2.0 認可エンドポイントへのGETで返されるHTMLから送信されるフォーム電文を受け取るためのものです。</p>
<h3><a class="anchor" aria-hidden="true" id="制限事項"></a><a href="#制限事項" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>制限事項</h3>
<p>OpenID ConnectのID tokenの発行は、以下指定のみサポート</p>
<ul>
<li>scope=openid</li>
<li>response_type=id_token または code</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="リクエスト"></a><a href="#リクエスト" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>リクエスト</h2>
<h3><a class="anchor" aria-hidden="true" id="リクエストurl"></a><a href="#リクエストurl" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>リクエストURL</h3>
<pre><code class="hljs"><span class="hljs-template-variable">{CellURL}</span><span class="xml">/__authz
</span></code></pre>
<h3><a class="anchor" aria-hidden="true" id="メソッド"></a><a href="#メソッド" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>メソッド</h3>
<p>POST</p>
<h3><a class="anchor" aria-hidden="true" id="リクエストボディ"></a><a href="#リクエストボディ" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>リクエストボディ</h3>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">書式</th><th style="text-align:left">必須</th><th style="text-align:left">有効値</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">response_type</td><td style="text-align:left">応答タイプ</td><td style="text-align:left">String</td><td style="text-align:left">○</td><td style="text-align:left">token, code, id_token(scope=openid必須)</td></tr>
<tr><td style="text-align:left">client_id</td><td style="text-align:left">アプリセル URL</td><td style="text-align:left">String</td><td style="text-align:left">○</td><td style="text-align:left">スキーマ認証元のアプリセルURL</td></tr>
<tr><td style="text-align:left">redirect_uri</td><td style="text-align:left">クライアントのリダイレクトエンドポイントURL</td><td style="text-align:left">String</td><td style="text-align:left">○</td><td style="text-align:left">アプリセルのデフォルトBOX配下に登録されたリダイレクトスクリプトのURL<br>application/x-www-form-urlencodedでフォーマットされたクエリパラメータを含める事ができる<br>フラグメントを含める事はできない<br>有効桁長:512byte</td></tr>
<tr><td style="text-align:left">state</td><td style="text-align:left">リクエストとコールバックの間で状態を維持するために使用するランダムな値</td><td style="text-align:left">String</td><td style="text-align:left">×</td><td style="text-align:left">ランダムな値<br>有効桁長:512byte</td></tr>
<tr><td style="text-align:left">scope</td><td style="text-align:left">要求するアクセス範囲</td><td style="text-align:left">String</td><td style="text-align:left">×</td><td style="text-align:left">Personiumでは&quot;openid&quot;を指定可能</td></tr>
<tr><td style="text-align:left">username</td><td style="text-align:left">ユーザ名</td><td style="text-align:left">String</td><td style="text-align:left">×</td><td style="text-align:left">登録済のユーザ名<br>※認証フォームリクエスト時、本パラメタの指定は無視する</td></tr>
<tr><td style="text-align:left">password</td><td style="text-align:left">パスワード</td><td style="text-align:left">String</td><td style="text-align:left">×</td><td style="text-align:left">登録済のパスワード<br>※認証フォームリクエスト時、本パラメタの指定は無視する</td></tr>
<tr><td style="text-align:left">expires_in</td><td style="text-align:left">アクセストークンの有効期限（秒）</td><td style="text-align:left">Int<br>1～3600</td><td style="text-align:left">×</td><td style="text-align:left">発行されるアクセストークンの有効期限を指定<br>デフォルトは3600（1時間）<br>※response_typeがtoken以外の場合は、本パラメタの指定は無視する</td></tr>
<tr><td style="text-align:left">cancel_flg</td><td style="text-align:left">キャンセルフラグ</td><td style="text-align:left">Boolean</td><td style="text-align:left">×</td><td style="text-align:left">認可処理のユーザキャンセルフラグ<br>trueが設定された場合、ユーザによりキャンセルされたものとする</td></tr>
<tr><td style="text-align:left">password_change_required</td><td style="text-align:left">パスワード変更必須フラグ</td><td style="text-align:left">Boolean</td><td style="text-align:left">×</td><td style="text-align:left">認証したアカウントがパスワード変更必須であったかを示すフラグ<br>※認可リクエストのレスポンスで返却されたpassword_change_required</td></tr>
<tr><td style="text-align:left">access_token</td><td style="text-align:left">アクセストークン</td><td style="text-align:left">String</td><td style="text-align:left">×</td><td style="text-align:left">認証したアカウントのアクセストークンを指定<br>※認可リクエストのレスポンスで返却されたaccess_token</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="リクエストヘッダ"></a><a href="#リクエストヘッダ" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>リクエストヘッダ</h3>
<p>なし</p>
<h3><a class="anchor" aria-hidden="true" id="リクエストクエリ"></a><a href="#リクエストクエリ" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>リクエストクエリ</h3>
<p>リクエストクエリと同じ</p>
<h2><a class="anchor" aria-hidden="true" id="レスポンス（認可処理リクエスト）"></a><a href="#レスポンス（認可処理リクエスト）" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>レスポンス（認可処理リクエスト）</h2>
<p>認可処理を行う。処理結果によってリダイレクト先やURLパラメータが異なる。<br>
処理結果のパターンは以下の通り。</p>
<ul>
<li>認可処理成功（トークン認証）</li>
<li>認可処理成功（コード認証）</li>
<li>認可処理成功（IDトークン認証）</li>
<li>認証失敗</li>
<li>パラメータチェックエラー（client_id、redirect_uri）</li>
<li>パラメータチェックエラー（上記以外）</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="認可処理成功（トークン認証）"></a><a href="#認可処理成功（トークン認証）" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>認可処理成功（トークン認証）</h3>
<p>認可処理に成功 かつ リクエストのresponse_typeにtokenを指定した場合</p>
<h4><a class="anchor" aria-hidden="true" id="ステータスコード"></a><a href="#ステータスコード" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ステータスコード</h4>
<p>303<br>
ブラウザはクライアントのリダイレクトエンドポイントURL（リクエストの「redirect_uri」の値）にリダイレクトされる。<br>
redirect_uriに、「URLパラメータ」で示すフラグメントが格納される。</p>
<pre><code class="hljs"><span class="hljs-template-variable">{redirect_uri}</span><span class="xml">#access_token=</span><span class="hljs-template-variable">{access_token}</span><span class="xml">&amp;token_type=Bearer&amp;expires_in=</span><span class="hljs-template-variable">{expires_in}</span><span class="xml">&amp;state=</span><span class="hljs-template-variable">{state}</span><span class="xml">&amp;last_authenticated=</span><span class="hljs-template-variable">{last_authenticated}</span><span class="xml">
&amp;failed_count=</span><span class="hljs-template-variable">{failed_count}</span><span class="xml">
※実際には改行されず一行で返却される
</span></code></pre>
<h4><a class="anchor" aria-hidden="true" id="urlパラメータ"></a><a href="#urlパラメータ" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLパラメータ</h4>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">redirect_uri</td><td style="text-align:left">クライアントのリダイレクトエンドポイントURL</td><td style="text-align:left">リクエストの「redirect_uri」の値</td></tr>
<tr><td style="text-align:left">access_token</td><td style="text-align:left">取得されたアクセストークン</td><td style="text-align:left">セルローカルトークンもしくは、トランスセルトークンを返却する</td></tr>
<tr><td style="text-align:left">token_type</td><td style="text-align:left">Bearer</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">expires_in</td><td style="text-align:left">アクセストークンの有効期限（秒）</td><td style="text-align:left">リクエスト時に設定した有効期限<br>デフォルトは3600（1時間）</td></tr>
<tr><td style="text-align:left">state</td><td style="text-align:left">リクエスト時に設定したstateの値</td><td style="text-align:left">リクエストとコールバックの間で状態を維持するために使用するランダムな値</td></tr>
<tr><td style="text-align:left">last_authenticated</td><td style="text-align:left">前回認証日時</td><td style="text-align:left">前回の認証日時（long型のUNIX時間）<br>初回認証時はnull<br>※パスワード認証の場合のみ返却する</td></tr>
<tr><td style="text-align:left">failed_count</td><td style="text-align:left">認証失敗回数</td><td style="text-align:left">前回認証時からのパスワード認証に連続で失敗した回数<br>※パスワード認証の場合のみ返却する</td></tr>
<tr><td style="text-align:left">box_not_installed</td><td style="text-align:left">Box未インストールフラグ</td><td style="text-align:left">アプリセルURLをスキーマに持つBoxが作成されていない場合のみtrueを返却する</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="認可処理成功（コード認証）"></a><a href="#認可処理成功（コード認証）" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>認可処理成功（コード認証）</h3>
<p>認可処理に成功 かつ リクエストのresponse_typeにcodeを指定した場合</p>
<h4><a class="anchor" aria-hidden="true" id="ステータスコード-1"></a><a href="#ステータスコード-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ステータスコード</h4>
<p>303<br>
ブラウザはクライアントのリダイレクトエンドポイント（リクエストの「redirect_uri」の値）にリダイレクトされる。<br>
redirect_uriに、「URLパラメータ」で示すクエリが格納される。</p>
<pre><code class="hljs">{redirect_uri}?code={code}&amp;<span class="hljs-keyword">state</span>={<span class="hljs-keyword">state</span>}&amp;last_authenticated={last_authenticated}&amp;failed_count={failed_count}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="urlパラメータ-1"></a><a href="#urlパラメータ-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLパラメータ</h4>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">redirect_uri</td><td style="text-align:left">クライアントのリダイレクトエンドポイントURL</td><td style="text-align:left">リクエストの「redirect_uri」の値</td></tr>
<tr><td style="text-align:left">code</td><td style="text-align:left">取得されたCode</td><td style="text-align:left">grant_type:authorization_codeで認可可能なCode</td></tr>
<tr><td style="text-align:left">state</td><td style="text-align:left">リクエスト時に設定したstateの値</td><td style="text-align:left">リクエストとコールバックの間で状態を維持するために使用するランダムな値</td></tr>
<tr><td style="text-align:left">last_authenticated</td><td style="text-align:left">前回認証日時</td><td style="text-align:left">前回の認証日時（long型のUNIX時間）<br>初回認証時はnull<br>※パスワード認証の場合のみ返却する</td></tr>
<tr><td style="text-align:left">failed_count</td><td style="text-align:left">認証失敗回数</td><td style="text-align:left">前回認証時からのパスワード認証に連続で失敗した回数<br>※パスワード認証の場合のみ返却する</td></tr>
<tr><td style="text-align:left">box_not_installed</td><td style="text-align:left">Box未インストールフラグ</td><td style="text-align:left">アプリセルURLをスキーマに持つBoxが作成されていない場合のみtrueを返却する</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="認可処理成功（idトークン認証）"></a><a href="#認可処理成功（idトークン認証）" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>認可処理成功（IDトークン認証）</h3>
<p>認可処理に成功 かつ リクエストのresponse_typeにid_tokenを指定した場合</p>
<h4><a class="anchor" aria-hidden="true" id="ステータスコード-2"></a><a href="#ステータスコード-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ステータスコード</h4>
<p>303<br>
ブラウザはクライアントのリダイレクトエンドポイントURL（リクエストの「redirect_uri」の値）にリダイレクトされる。<br>
redirect_uriに、「URLパラメータ」で示すフラグメントが格納される。</p>
<pre><code class="hljs"><span class="hljs-template-variable">{redirect_uri}</span><span class="xml">#id_token=</span><span class="hljs-template-variable">{id_token}</span><span class="xml">&amp;state=</span><span class="hljs-template-variable">{state}</span><span class="xml">&amp;last_authenticated=</span><span class="hljs-template-variable">{last_authenticated}</span><span class="xml">&amp;failed_count=</span><span class="hljs-template-variable">{failed_count}</span><span class="xml">
</span></code></pre>
<h4><a class="anchor" aria-hidden="true" id="urlパラメータ-2"></a><a href="#urlパラメータ-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLパラメータ</h4>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">redirect_uri</td><td style="text-align:left">クライアントのリダイレクトエンドポイントURL</td><td style="text-align:left">リクエストの「redirect_uri」の値</td></tr>
<tr><td style="text-align:left">id_token</td><td style="text-align:left">取得されたid_token</td><td style="text-align:left">OpenID Connectで利用可能なid_token</td></tr>
<tr><td style="text-align:left">state</td><td style="text-align:left">リクエスト時に設定したstateの値</td><td style="text-align:left">リクエストとコールバックの間で状態を維持するために使用するランダムな値</td></tr>
<tr><td style="text-align:left">last_authenticated</td><td style="text-align:left">前回認証日時</td><td style="text-align:left">前回の認証日時（long型のUNIX時間）<br>初回認証時はnull<br>※パスワード認証の場合のみ返却する</td></tr>
<tr><td style="text-align:left">failed_count</td><td style="text-align:left">認証失敗回数</td><td style="text-align:left">前回認証時からのパスワード認証に連続で失敗した回数<br>※パスワード認証の場合のみ返却する</td></tr>
<tr><td style="text-align:left">box_not_installed</td><td style="text-align:left">Box未インストールフラグ</td><td style="text-align:left">アプリセルURLをスキーマに持つBoxが作成されていない場合のみtrueを返却する</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="認証失敗"></a><a href="#認証失敗" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>認証失敗</h3>
<p>認証に失敗した場合（パスワード不一致、アカウントロック中など）</p>
<h4><a class="anchor" aria-hidden="true" id="ステータスコード-3"></a><a href="#ステータスコード-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ステータスコード</h4>
<p>303<br>
ブラウザは認可エンドポイント（セルのURL + __authz）に再度リダイレクトされる。<br>
認可エンドポイントに、「URLパラメータ」で示すクエリが格納される。</p>
<pre><code class="hljs"><span class="hljs-template-variable">{authorization_endpoint_url}</span><span class="xml">?response_type=</span><span class="hljs-template-variable">{response_type}</span><span class="xml">&amp;redirect_uri=</span><span class="hljs-template-variable">{redirect_uri}</span><span class="xml">&amp;client_id=</span><span class="hljs-template-variable">{client_id}</span><span class="xml">&amp;state=</span><span class="hljs-template-variable">{state}</span><span class="xml">&amp;scope=</span><span class="hljs-template-variable">{scope}</span><span class="xml">
&amp;expires_in=</span><span class="hljs-template-variable">{expires_in}</span><span class="xml">&amp;error=</span><span class="hljs-template-variable">{error}</span><span class="xml">&amp;error_description=</span><span class="hljs-template-variable">{error_description}</span><span class="xml">&amp;error_uri=</span><span class="hljs-template-variable">{error_uri}</span><span class="xml">&amp;code=</span><span class="hljs-template-variable">{code}</span><span class="xml">
&amp;password_change_required=</span><span class="hljs-template-variable">{password_change_required}</span><span class="xml">&amp;access_token=</span><span class="hljs-template-variable">{access_token}</span><span class="xml">
※実際には改行されず一行で返却される
</span></code></pre>
<h4><a class="anchor" aria-hidden="true" id="urlパラメータ-3"></a><a href="#urlパラメータ-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLパラメータ</h4>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">authorization_endpoint_url</td><td style="text-align:left">認可エンドポイントのURL（セルのURL + __authz）</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">response_type</td><td style="text-align:left">リクエスト時に設定したresponse_typeの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">client_id</td><td style="text-align:left">リクエスト時に設定したclient_idの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">redirect_uri</td><td style="text-align:left">リクエスト時に設定したredirect_uriの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">state</td><td style="text-align:left">リクエスト時に設定したstateの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">scope</td><td style="text-align:left">リクエスト時に設定したscopeの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">expires_in</td><td style="text-align:left">リクエスト時に設定したexpires_inの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">error</td><td style="text-align:left">エラー内容を示すコード</td><td style="text-align:left">「error」を参照</td></tr>
<tr><td style="text-align:left">error_description</td><td style="text-align:left">エラーの追加情報</td><td style="text-align:left">例外メッセージなどを設定する</td></tr>
<tr><td style="text-align:left">error_uri</td><td style="text-align:left">エラーの追加情報のWebページのURI</td><td style="text-align:left">空文字を返す<br>※今後のエンハンスに備えて設定</td></tr>
<tr><td style="text-align:left">code</td><td style="text-align:left"><a href="/docs/ja/apiref/004_Error_Messages">Personiumのメッセージコード</a></td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">password_change_required</td><td style="text-align:left">認証したアカウントがパスワード変更必須かを示すフラグ</td><td style="text-align:left">認証できるがパスワード変更が必須の場合にのみtrueを返却する</td></tr>
<tr><td style="text-align:left">access_token</td><td style="text-align:left">認証したアカウントのアクセストークン</td><td style="text-align:left">password_change_requiredがtrueの場合のみパスワード変更のみ可能なアクセストークンを返却</td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="error"></a><a href="#error" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>error</h5>
<table>
<thead>
<tr><th style="text-align:left">コード値</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">invalid_request</td><td style="text-align:left">認証に必須なパラメータ（username、password）が指定されていない</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">invalid_grant</td><td style="text-align:left">認証失敗<br>アカウントロック中</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">unauthorized_client</td><td style="text-align:left">クライアントが認可されていない<br>パスワード変更が必要</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">server_error</td><td style="text-align:left">サーバエラー</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="パラメータチェックエラー（client_id、redirect_uri）"></a><a href="#パラメータチェックエラー（client_id、redirect_uri）" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>パラメータチェックエラー（client_id、redirect_uri）</h3>
<p>「client_id、redirect_uriが未指定」「client_id、redirect_uriがURL形式ではない」「client_idとredirect_uriのセルが異なる」の場合</p>
<h4><a class="anchor" aria-hidden="true" id="ステータスコード-4"></a><a href="#ステータスコード-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ステータスコード</h4>
<p>303<br>
ブラウザはシステムのエラーページにリダイレクトされる。</p>
<pre><code class="hljs">{error_page_uri}?<span class="hljs-meta">code</span>={<span class="hljs-meta">code</span>}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="urlパラメータ-4"></a><a href="#urlパラメータ-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLパラメータ</h4>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">error_page_uri</td><td style="text-align:left">Redirect URL</td><td style="text-align:left">システムのエラーページ「セルのURL + __html/error」</td></tr>
<tr><td style="text-align:left">code</td><td style="text-align:left"><a href="/docs/ja/apiref/004_Error_Messages">Personiumのメッセージコード</a></td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="パラメータチェックエラー（上記以外）"></a><a href="#パラメータチェックエラー（上記以外）" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>パラメータチェックエラー（上記以外）</h3>
<p>client_id、redirect_uri、username、password以外のリクエストパラメータで、必須項目が未設定もしくは設定値が不正な形式の場合<br>
または、cancel_flgにtrueが設定されている（ユーザによりキャンセルされた）場合</p>
<h4><a class="anchor" aria-hidden="true" id="ステータスコード-5"></a><a href="#ステータスコード-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ステータスコード</h4>
<p>303<br>
ブラウザはクライアントのリダイレクトエンドポイントURL（リクエストの「redirect_uri」の値）にリダイレクトされる。<br>
redirect_uriに、「URLパラメータ」で示すフラグメントまたはクエリが格納される。<br>
（response_type=codeの場合はクエリが格納され、それ以外の場合はフラグメントが格納される）</p>
<pre><code class="hljs">{redirect_uri}?error={error}&amp;error_description={error_description}&amp;<span class="hljs-keyword">state</span>={<span class="hljs-keyword">state</span>}&amp;code={code}
{redirect_uri}<span class="hljs-comment">#error={error}&amp;error_description={error_description}&amp;state={state}&amp;code={code}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="urlパラメータ-5"></a><a href="#urlパラメータ-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLパラメータ</h4>
<table>
<thead>
<tr><th style="text-align:left">項目名</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">redirect_uri</td><td style="text-align:left">Redirect URL</td><td style="text-align:left">リクエストの「redirect_uri」で指定された、<br>クライアントのリダイレクトスプリクトのURL</td></tr>
<tr><td style="text-align:left">error</td><td style="text-align:left">エラー内容を示すコード</td><td style="text-align:left">「error」を参照</td></tr>
<tr><td style="text-align:left">error_description</td><td style="text-align:left">エラーの追加情報</td><td style="text-align:left">例外メッセージなどを設定する</td></tr>
<tr><td style="text-align:left">error_uri</td><td style="text-align:left">エラーの追加情報のWebページのURI</td><td style="text-align:left">空文字を返す<br>※今後のエンハンスに備えて設定</td></tr>
<tr><td style="text-align:left">state</td><td style="text-align:left">リクエスト時に設定したstateの値</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">code</td><td style="text-align:left"><a href="/docs/ja/apiref/004_Error_Messages">Personiumのメッセージコード</a></td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="error-1"></a><a href="#error-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>error</h5>
<table>
<thead>
<tr><th style="text-align:left">コード値</th><th style="text-align:left">概要</th><th style="text-align:left">備考</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">invalid_request</td><td style="text-align:left">リクエストで必須パラメータが指定されていない<br>リクエストパラメータの形式が不正</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">unauthorized_client</td><td style="text-align:left">ユーザによってキャンセルされた</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">unsupported_response_type</td><td style="text-align:left">response_typeの値が不正</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">server_error</td><td style="text-align:left">サーバエラー</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="curlサンプル"></a><a href="#curlサンプル" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cURLサンプル</h2>
<pre><code class="hljs css language-sh">curl <span class="hljs-string">"https://cell1.unit1.example/__authz"</span> -X POST -i \
-d <span class="hljs-string">'response_type=token&amp;client_id=https://app-cell1.unit1.example/&amp;\
redirect_uri=https://app-cell1.unit1.example/__/redirect.md&amp;\
state=0000000111&amp;username=account1&amp;password=pass'</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#概要">概要</a><ul class="toc-headings"><li><a href="#制限事項">制限事項</a></li></ul></li><li><a href="#リクエスト">リクエスト</a><ul class="toc-headings"><li><a href="#リクエストurl">リクエストURL</a></li><li><a href="#メソッド">メソッド</a></li><li><a href="#リクエストボディ">リクエストボディ</a></li><li><a href="#リクエストヘッダ">リクエストヘッダ</a></li><li><a href="#リクエストクエリ">リクエストクエリ</a></li></ul></li><li><a href="#レスポンス（認可処理リクエスト）">レスポンス（認可処理リクエスト）</a><ul class="toc-headings"><li><a href="#認可処理成功（トークン認証）">認可処理成功（トークン認証）</a></li><li><a href="#認可処理成功（コード認証）">認可処理成功（コード認証）</a></li><li><a href="#認可処理成功（idトークン認証）">認可処理成功（IDトークン認証）</a></li><li><a href="#認証失敗">認証失敗</a></li><li><a href="#パラメータチェックエラー（client_id、redirect_uri）">パラメータチェックエラー（client_id、redirect_uri）</a></li><li><a href="#パラメータチェックエラー（上記以外）">パラメータチェックエラー（上記以外）</a></li></ul></li><li><a href="#curlサンプル">cURLサンプル</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/images/favicon.ico" alt="" width="66" height="58"/></a><div><h5>Documentation</h5><a href="https://personium.io/docs/en/overview/001_Introduction.html">Introduction</a><a href="https://personium.io/docs/en/server-operator/">Server Software Operator&#x27;s Guide</a><a href="https://personium.io/docs/en/app-developer/">Application Developer&#x27;s Guide</a><a href="https://personium.io/docs/en/apiref/current/000_Rest_API_Reference.html">API Reference</a></div><div><h5>Community</h5><a href="https://personium-io.slack.com/">Slack</a><a href="https://github.com/personium">GitHub</a><a href="https://twitter.com/personium" target="_blank" rel="noreferrer noopener">Twitter</a><div class="social"><a href="https://twitter.com/personium" class="twitter-follow-button">Follow @personium</a></div></div><div><h5>More</h5><a href="/blog">News</a><a href="https://drive.google.com/drive/u/1/folders/1VWGpfCbPOLY2TCa7Lh2jbcsZ5Bp0WV4q">Draft Docs</a></div></section><a href="https://personium.io/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/logo-quantify-light.png" alt="Personium Project" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Personium Project</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>